<div class="estadisticas-container px-6 py-8">
  <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Estadísticas del Buffet</h2>

  <div *ngFor="let reporte of reportesDisponibles" class="mb-4 border rounded-xl shadow-sm bg-white">
    <div class="flex justify-between items-center px-4 py-3 border-b bg-gray-50 rounded-t-xl">
      <h3 class="text-lg font-medium text-gray-700">{{ reporte.titulo }}</h3>
      <button
        (click)="toggleDesplegado(reporte.id)"
        class="text-sm px-3 py-1 rounded-md transition-colors duration-200 bg-blue-500 text-white hover:bg-blue-600 focus:outline-none"
      >
        {{ estaDesplegado(reporte.id) ? 'Ocultar' : 'Ver' }}
      </button>
    </div>

    <div *ngIf="estaDesplegado(reporte.id)" class="p-4">
      <button
        (click)="generarGrafico(reporte)"
        [disabled]="cargando.has(reporte.id)"
        class="mb-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Cargar gráfico
      </button>

      <ng-container *ngIf="getGrafico(reporte.id) as grafico">
        <app-grafico-estadistico
          [titulo]="grafico.titulo"
          [tipo]="grafico.tipo"
          [labels]="grafico.labels"
          [data]="grafico.data"
          [color]="grafico.color"
        ></app-grafico-estadistico>
      </ng-container>
    </div>
  </div>
</div>
